<template>
	<Row type="flex">
		<i-col span="5" class="layout-menu-left start-box pack-center" style="">
			<div class="layout-header start-box box-align pack-center" :style="{'backgroundColor':'#db240b', 'width':'100%'}">
				<div class="start-box">
					<div class="bg"></div>
					<p>天津市党内统计信息系统</p>
				</div>
			</div>
		</i-col>
		<i-col span="19">
			<div class="top-bar start-box">
				<!-- 一级导航 -->
				<div class="nav-manage start-box box-align box-flex">
					<div class="drown-outer start-box box-align">
						<Dropdown trigger="click" style="color:#fff;margin: 0 20px"  @on-click="routeTo">
					        <a href="javascript:void(0)" style="font-size: 14px;color: #fff;">
					            组织管理
					            <Icon type="arrow-down-b"></Icon>
					        </a>
					        <Dropdown-menu slot="list" class="nav-item">
					            <Dropdown-item name="/baseSituation">党建基本情况</Dropdown-item>
					            <Dropdown-item name="/orgManage/0">党组织管理</Dropdown-item>
					            <Dropdown-item  name="/unitManage">单位管理</Dropdown-item>
					        </Dropdown-menu>
					    </Dropdown>	
					</div>
					<div class="drown-outer start-box box-align">
						<Dropdown trigger="click" style="margin:0 20px" @on-click="routeTo">
					        <a href="javascript:void(0)">
					            人员管理
					            <Icon type="arrow-down-b"></Icon>
					        </a>
					        <Dropdown-menu slot="list"  class="nav-item">
					            <Dropdown-item name="/dangyuan">党员管理</Dropdown-item>
					            <Dropdown-item name="/applicantManage">申请人管理</Dropdown-item>
					            <Dropdown-item name="/historyManage">历史人员管理</Dropdown-item>
					        </Dropdown-menu>
					    </Dropdown>
					</div>
				    <div class="drown-outer start-box box-align" >
					    <Dropdown trigger="click" style="margin:0 20px" @on-click="routeTo">
					        <a href="javascript:void(0)">
					            业务工作
					            <Icon type="arrow-down-b"></Icon>
					        </a>
					        <Dropdown-menu slot="list"  class="nav-item">
					            <Dropdown-item name="/organizationManage">组织关系转接</Dropdown-item>
					            <Dropdown-item name="/recruitMembers">发展党员</Dropdown-item>
					            <Dropdown-item name="/repeatMembers">重复人员查询</Dropdown-item>
					            <Dropdown-item name="/interview">介绍信管理</Dropdown-item>
					        </Dropdown-menu>
					    </Dropdown>
					</div>
					<div class="drown-outer start-box box-align">
						<router-link style="margin:0 20px;" :to="{'path': '/countForm/covers/form-2'}">统计报表</router-link>
					</div>
				    <div class="drown-outer start-box box-align">
				    	<router-link :to="{name : 'adminconfig'}">
				    		<a style="margin:0 20px;">管理员设置</a>
				    	</router-link>
				    </div>
				</div>
				<!-- 用户信息 -->
				<Dropdown class="info-tips" trigger="hover" style="margin:0 20px;" @on-click="setTo">
			        <div class="start-box box-align" style="height:60px;">
						<img class="avatar" src="https://placem.at/people?w=32&h=42" width="32" height="42" alt="" style="border: 1px solid #fff;vertical-align:bottom;">
						
						<div class="start-box box-orient">
							<p style="font-size: 14px; color:#fff; line-height:20px;">李书记</p>
						</div>
						<Icon type="arrow-down-b" style="margin-left:10px; color: #fff;"></Icon>
					</div>
			        <Dropdown-menu slot="list"  class="nav-item text-center" style="padding: 0;" >
			            <Dropdown-item name="1">
			            	<p style="font-size: 14px; font-weight: bold;">李书记</p>
			            	<p>天房集团党委管理员</p>
			            </Dropdown-item>
			            <Dropdown-item name="2">修改密码</Dropdown-item>
			            <Dropdown-item name="3">切换管理角色</Dropdown-item>
			            <Dropdown-item name="4"><p style="color:#ed3f14;">退出登陆</p></Dropdown-item>
			        </Dropdown-menu>
			    </Dropdown>
			</div>
		</i-col>
	</Row>
</template>
<script>
	export default {
		name: 'top',
		data() {
			return {
				userInfo:{
					real_name : '123',
				}
			}
		},
		components: {
		},
		methods: {
			setTo(name) {
				switch(parseInt(name)) {
					case 1: break;
					case 2: break;
					case 3: break;
					case 4: this.logout();break;
				}
			},
			logout() {
				let that = this;
	           	this.axios({
	                method: 'get',
	                url: '/v1/user/logout',
	            })
	            .then(res => {
	                let needData = res.data;
	                if (needData.code == 200) {
	                    that.$Message.success('退出成功');
	                    that.$router.push('/login');
	                } else {
	                    that.$Message.error(needData.msg);
	                }
	            })
	            .catch(err => {
	            	console.log(err)
	                this.$Message.error('网络请求异常');
	            }) 
			},
			getUserInfo(){
				var that = this;
				// this.axios({
				// 	method: 'post',
				// 	url: '/v1/fm/getuserinfo',
				// })
				// .then(res => {
				// 	let _data = res.data;
				// 	if(_data.code==200){
				// 		let data = _data.data;
				// 		that.userInfo.real_name = data.real_name;
				// 	}
				// })
				// .catch(error => {
				// 	console.log('请求失败');
				// })
			},
			routeTo(path) {
				this.$router.push({path: path})
			}
		},
		created() {

		},
		mounted() {
			this.getUserInfo();
	    },
	}
</script>
<style>
	.info-tips .ivu-select-dropdown {
		padding: 0px;
	}
	.text-right{
		text-align: right;
	}
	.layout-header{
		overflow: hidden;
		text-align: center;
	}
	.layout-header a{
		display:inline-block;
		margin-top: 10px;
	}
	.layout-header-fav{
		font-size: 0;
		margin-top: 15px;
		padding-right: 20px;
	}

	
	.layout-header-fav img{
		display: inline-block;
		width: 30px;
		height: 30px;
		border-radius: 50%;
		margin-right: 20px;
		vertical-align: middle;
	}
	.layout-header-fav p{
		display: inline-block;
		font-size: 14px;
		vertical-align: middle;
	}
	.layout-header-fav a{
		font-size: 14px;
		color: #4b4b4b;
		display: inline-block;
		margin-left: 15px;
		vertical-align: middle;
	}
	.avatar{
		margin-right: 10px;
	}
</style>