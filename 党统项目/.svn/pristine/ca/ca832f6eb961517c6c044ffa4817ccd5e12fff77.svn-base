<template>
	<div class="form-set-nav layout-breadcrumb clearfix">
        <Dropdown trigger="click" placement="bottom-start" @on-click="clearTable">
            <Button type="ghost">报表清空 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in tableClearList" :name="item.value" :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Dropdown trigger="click" placement="bottom-start" @on-click="tableCountF"> 
            <Button type="ghost">报表直统 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in tableCountList" :name="item.value" :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Dropdown trigger="click" placement="bottom-start" @on-click="tableSet">
            <Button type="ghost">报表汇总 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in tableAllList" :name="item.value" :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Button type="ghost">数据反查</Button>
        <Dropdown trigger="click" placement="bottom-start">
            <Button type="ghost">报表查询 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in searchList" :name="item.value"  :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Dropdown trigger="click" placement="bottom-start" @on-click="checkF">
            <Button type="ghost">报表校核 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in checkTableList" name="/checkForm" :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        
        <Dropdown trigger="click" placement="bottom-start" @on-click="prientF">
            <Button type="ghost">打印 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in prientList" :name="item.value"  :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Dropdown trigger="click" placement="bottom-start" @on-click="output">
            <Button type="ghost">导出 <Icon type="arrow-down-b"></Icon></Button>
            <DropdownMenu slot="list">
                <DropdownItem v-for="item in exportList" :name="item.value" :key="item.value">{{item.name}}</DropdownItem>
            </DropdownMenu>
        </Dropdown>
        <Button type="ghost" @click="lockF">上报锁定</Button>
        <!-- <Button type="ghost">上报解锁</Button> -->
        <div class="right-set fr">
            <Button type="error" @click="beginDo">{{btnTips}}</Button>
            <Button type="ghost" :disabled="!saveStatus" @click="saveTable">保存</Button>
            
            <!-- <Button type="ghost">取数条件</Button> -->

        </div>
    </div>
</template>
<script>
	export default {
		name: 'nav',
        data() {
        	return {
                // saveStatus: true,
                btnTips: '开始录改',
                tableClearList: [{name: '清空本表', value: 1},{name: '清空多表', value: 2}],
                tableCountList:  [{name: '直统本表', value: 1},{name: '直统多表', value: 2}],
                tableAllList:  [{name: '汇总本表', value: 1},{name: '汇总多表', value: 2}],
                checkTableList:  [{name: '校验本表', value: 1},{name: '校验全部',value: 2}],
                searchModel: 1,
                prientList: [{name: '打印报表', value: 1}, {name: '打印空报表', value: 2}],
                exportList: [{name: '导出本表', value: 1}, {name: '导出多表', value: 2}],
                searchList: [{name: '按行查询', value: 1}, {name: '按列查询', value: 2}, {name: '单项查询', value: 2}],
        	}
        },
        computed: {
            saveStatus: { 
                set(val) {
                    this.$store.commit('setStatus', {stat: val})
                },
                get() {
                    this.btnTips = this.$store.state.remberStatus ? '开始录改' : '取消录改';
                    return !this.$store.state.remberStatus;  
                }
            }
        },
        watch: {
            '$route' (to, from) {
                this.$store.commit('setStatus', {stat: true}) 
            },
        },
        methods: {
        	//报表清空
        	clearTable(val) {
                this.$emit('allControl', {value: val, type: 1})
            },
            //报表直统
            tableCountF(val) {
                this.$emit('allControl', {value: val, type: 2})
            },
            //报表汇总
            tableSet(val) {
            	this.$emit('allControl', {value: val, type: 3})
            },
            //报表校核
            checkF(val) {
            	this.$emit('allControl', {value: val, type: 4})
            },
            //打印
            prientF(val) {
            	this.$emit('allControl', {value: val, type: 5})
            },
            //导出
            output(val) {
            	this.$emit('allControl', {value: val, type: 6})
            },
            //上所解锁
            lockF() {
            	this.$emit('allControl', {value: 1, type: 7})
            },
            //开始录制
            beginDo() {
                this.saveStatus = !this.saveStatus;
            	this.$emit('allControl', {value: 1, type: 8, status: this.saveStatus})
                this.$store.commit('setStatus', {stat: this.saveStatus})
            },
            //保存报表
            saveTable() {
            	this.$emit('allControl', {value: 1, type: 9})
                console.log(this)
            },
        }
	}
</script>
<style scoped>
	
</style>