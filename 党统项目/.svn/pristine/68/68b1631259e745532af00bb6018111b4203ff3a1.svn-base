<template>
    <div class="app-main" :style="{'width':'100%','height':'100%'}" @click="closeDefault">
        <div class="layout start-box box-orient" :style="{'width':'100%','height':'100%'}">
            <!-- 头部 -->
            <top></top>
            <Row type="flex" class="box-flex">
                <!-- 侧边栏树结构 -->
                <i-col span="5" class="layout-menu-left">
                    <Slide ref="slide" 
                        @reflashList="reflashList" 
                        @getnode="getnode"
                        @slideDown="slideDown"
                        :url="url"
                        :openitem="openitem"
                        :currentnode="currentnode"
                        :openlist="openlist"
                        >
                    </Slide>
                </i-col>
                <i-col span="19" class="start-box box-orient">
                    <!-- 筛选结构 -->
                    <div class="form-set-nav layout-breadcrumb clearfix">
                        <Dropdown trigger="click" placement="bottom-start">
                            <Button type="ghost">报表清空 <Icon type="arrow-down-b"></Icon></Button>
                            <DropdownMenu slot="list">
                                <DropdownItem v-for="item in zuzhiList" :disabled="item.disabled"  :name="item.value" :key="item.value">{{item.label}}</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Dropdown trigger="click" placement="bottom-start">
                            <Button type="ghost">报表直统 <Icon type="arrow-down-b"></Icon></Button>
                            <DropdownMenu slot="list">
                                <DropdownItem v-for="item in zhibuList" :name="item.value" :key="item.value">{{item.label}}</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Dropdown trigger="click" placement="bottom-start">
                            <Button type="ghost">报表汇总 <Icon type="arrow-down-b"></Icon></Button>
                            <DropdownMenu slot="list">
                                <DropdownItem v-for="item in serachSet" :name="item.value" :key="item.value">{{item.label}}</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Dropdown trigger="click" placement="bottom-start">
                            <Button type="ghost">报表校核 <Icon type="arrow-down-b"></Icon></Button>
                            <DropdownMenu slot="list">
                                <DropdownItem v-for="item in serachSet" :name="item.value" :key="item.value">{{item.label}}</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        
                        <Dropdown trigger="click" placement="bottom-start">
                            <Button type="ghost">打印 <Icon type="arrow-down-b"></Icon></Button>
                            <DropdownMenu slot="list">
                                <DropdownItem v-for="item in prientList" :name="item.value"  :key="item.value">{{item.label}}</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Button type="ghost">导出</Button>
                        <Button type="ghost">上报锁定</Button>
                        <Button type="ghost">上报解锁</Button>
                        <div class="right-set fr">
                            <Button type="error">开始录制</Button>
                            <Button type="ghost">保存</Button>
                            <Dropdown trigger="click" placement="bottom-start">
                                <Button type="ghost">查询 <Icon type="arrow-down-b"></Icon></Button>
                                <DropdownMenu slot="list">
                                    <DropdownItem v-for="item in prientList" :name="item.value"  :key="item.value">{{item.label}}</DropdownItem>
                                </DropdownMenu>
                            </Dropdown>
                            <Button type="ghost">取数条件</Button>

                        </div>
                    </div>
                    <!-- 表单主结构 -->
                    <div class="content-padding start-box box-flex">
                        <div class="form-slides start-box box-orient">
                            <div class="slides-top start-box box-pack">
                                <Select style="width:100px" placeholder="年度报表">
                                    <Option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                                </Select>
                                <Select style="width:100px" placeholder="2017年度">
                                     <Option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</Option>
                                </Select>
                            </div>
                            <div class="slides-content box-flex">
                                <ul class="slide-list">
                                    <li class="item">封面</li>
                                    <li class="item">一表：党员数量变化情况一表：党员数量变化情况</li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-table box-flex">
                            
                        </div>
                    </div>
                </i-col>
            </Row>
        </div>
    </div>
</template>
<script>
    import top from '@/components/top.vue'
    import Slide from '@/components/slide.vue'
    import subNav from '@/components/subNav.vue'

    export default {
        name: 'countForm',
        data() {
            return {
                zuzhiList: [{value: 1, label: '党组织增加', disabled: false}, {value: 2, label: '党组织删除', disabled: false}, {value: 3, label: '整建制转移', disabled: false}],
                zuzhiModel: '',
                zhibuList: [{value: 1, label: '党支部合并'}, {value: 2, label: '党支部拆分'}, {value: 3, label: '党支部撤销'}, {value: 4, label: '设党小组'}],
                zhibuModel: '',
                serachSet: [{value: 1, label: '组合查询'}, {value: 2, label: '随机统计'}, {value: 3, label: '一个党组织的组合统计'}, {value: 4, label: '多个党组织的组合统计'}],
                searchModel: 1,
                prientList: [{value: 1, label: '打印'}],
                url: '/v1/trees/list',
                openitem: [],
                openlist: [],
                currentnode: '',
                searchString: '',
                cityList: [
                    {
                        value: 'beijing',
                        label: '北京市'
                    },
                    {
                        value: 'shanghai',
                        label: '上海市'
                    },
                    {
                        value: 'shenzhen',
                        label: '深圳市'
                    },
                    {
                        value: 'hangzhou',
                        label: '杭州市'
                    },
                    {
                        value: 'nanjing',
                        label: '南京市'
                    },
                    {
                        value: 'chongqing',
                        label: '重庆市'
                    }
                ],
                model1: ''

            }
        },
        computed: {
        },
        watch: {
            
        },
        components: {
            top,
            Slide,
            subNav,
        },
        methods: {
            slideDown() {
                console.log('jieshu')
            },
            closeDefault() {
                if (this.$route.name == 'info' || this.$route.name == 'group') {
                    this.$router.go(-1);
                };
            },
            //查看详情
            goDetail(row) {
                event.stopPropagation();
                
            },
            //search
            searchbar() {
                let that = this;
                let qs = require('qs');
                if (that.searchString == '') {
                    that.$Message.error('请输入搜索关键字');

                };
                this.axios({
                    method: 'get',
                    url: '/v1/dept/search-list',
                    params: {
                        dept_id: that.$store.state.remberId,
                        keyword: that.searchString,
                        opt: 0
                    }
                })
                .then(res => {
                    let needData = res.data;
                    if (needData.code == 200) {
                        that.lists = [];
                        needData.data.forEach(item => {
                            that.lists.push(item);
                        });
                    } else {
                        that.$Message.error(needData.msg);
                    }
                })
                .catch(err => {
                    this.$Message.error('网络请求异常');
                })
            },

            // tree emit events（events up）
            reflashList(item) {

            },


            getnode(node) {
                // console.log(node)
            },
            reflash() {

            }

        },
        created() {
                
        },
        mounted() {       
        },
    }
</script>
<style scoped>
    .form-slides {
        width: 220px;
        border: 1px solid #dddee1;
    }
    .form-slides .slides-top {
        padding: 5px;
        border-bottom: 1px solid #dddee1;
    }
    .slide-list .item {
        /*width: 200px;*/
        height: 40px;
        line-height: 40px;
        padding-left: 8px;
        background-color: #fff;
        border-bottom: 1px solid #dddee1;
        width: 100%;
        white-space: nowrap;
        text-overflow:ellipsis;
        overflow: hidden;
        cursor: pointer;
    }
    .form-slides .slides-content {
        padding-bottom: 20px;
        background: #fff;
        overflow: auto;
    }
    .form-table {
        border: 1px solid #dddee1;
        margin-left: 15px;
        background: #fff;
    }
    .togoole-enter-active {
        transition: all 0.3s;
    }
    .togoole-leave-active {
        transition: all 0.3s;
    }
    .slides-enter-active {
      transition: all .3s ease;
    }
    .slides-leave-active {
      transition: all .8s ease;
    }
    .slides-enter, .slides-leave-to
    {
      transform: translateX(800px);
      opacity: 0;
    }
</style>