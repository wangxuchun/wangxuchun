<!--党支部维护/党支部合并弹窗-->
<template>
  <div class="PartyMerge">
    <Modal
      v-model="modal1"
      title="党支部合并"
      width="950"
      :loading="loading"
      :mask-closable=false
      :closable=false
      @on-ok="handleSubmit('MergeFormItem')"
      @on-cancel="cancel">
      <Row>
        <Col span="15">
          <Form :model="MergeFormItem" label-position="top" ref="MergeFormItem"  :rules="ruleValidate">
            <FormItem label="选择需要合并的党支部或联合党支部:" prop="checkbox">
                <CheckboxGroup v-model="MergeFormItem.checkbox">
                  <Row style="border: 1px solid #ccc;padding: 20px 15px">
                    <Row><Checkbox label="第一党支部"></Checkbox></Row>
                    <Row><Checkbox label="第二党支部"></Checkbox></Row>
                    <Row><Checkbox label="第三党支部"></Checkbox></Row>
                    <Row><Checkbox label="第四党支部"></Checkbox></Row>
                  </Row>
                </CheckboxGroup>
            </FormItem>
            <FormItem label="保留党支部" prop="RetainParty">
              <Select style="width: 340px" v-model="MergeFormItem.RetainParty" placeholder="请选择保留党支部">
                <Option :value="item" v-for="item in MergeFormItem.checkbox" key="item">{{item}}</Option>
              </Select>
            </FormItem>
          </Form>
        </Col>
      </Row>
    </Modal>
  </div>
</template>
<script type="text/ecmascript-6">
  export default {
    name:'PartyMerge',
    data () {
      return {
        modal1: true,//是否显示弹窗
        loading:true,
        MergeFormItem: {  //form的绑定
          checkbox:[],//选择合并的党支部
          RetainParty:'',//保留党支部
        },
        ruleValidate: {
          checkbox: [
            { required: true, type: 'array', min: 2, message: '至少选择两个党支部', trigger: 'change' },
//            { type: 'array', max: 2, message: '最多选择两个爱好', trigger: 'change' }
          ],
          RetainParty: [
            {required: true, message: '请选择保留党支部', trigger: 'change'}
          ],

        }
      }
    },

    methods: {
      handleSubmit(name) {
        this.$refs[name].validate((valid) => {
          if (valid) {
            this.$Message.success('提交成功!');
            this.modal1=false;
            this.$router.go(-1)
          } else {
            this.loading=false;
        this.$Message.error('表单验证失败!');
        setTimeout(() => {
          this.loading=true;
      }, 20);
      }
      })
      },
      cancel () {
        this.$Message.info('点击了取消');
        this.$router.go(-1)
      }
    }
  }
</script>
<style>
  .TeamMember{
    width: 100%;
    height: 100%;
    position: absolute;
  }
  /*.TeamMember .ivu-modal{*/
    /*width: 950px !important;*/
  /*}*/
</style>
